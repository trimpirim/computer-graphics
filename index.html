<html>
  <head>
    <title>My first Three.js app</title>
    <style>
      body { margin: 0; }
    </style>
    <link rel="stylesheet" type="text/css" href="css/second-task.css" />
    <link rel="stylesheet" href="//code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
    <script src="js/lib/jquery-2.1.4.js"></script>
    <script src="js/lib/jquery-ui-1.11.4/jquery-ui.min.js"></script>
    <script src="js/lib/glMatrix-2.2.2.min.js"></script>
    <script src="js/lib/webgl-utils.js"></script>
    <script src="js/lib/shapes-utils.js"></script>
    <script src="js/lib/csg-utils.js"></script>
    <script id="shader-fs-default" type="x-shader/x-fragment">
      precision highp float;

      uniform mat3 GLNormalMatrix;
      uniform mat4 GLModelViewMatrix;
      uniform mat4 GLProjectionMatrix;
      uniform mat4 GLModelViewProjectionMatrix;
      uniform mat4 GLModelViewMatrixInverse;
      uniform mat4 GLProjectionMatrixInverse;
      uniform mat4 GLModelViewProjectionMatrixInverse;
      uniform float GLPointSize;
      uniform sampler2D GLSampler;
      uniform sampler2D GLSampler2;

      varying vec4 color;
      varying vec2 textureCoord;
      varying vec3 lighting;

      varying vec3 normal;
      varying vec3 vertPos;

      const vec3 lightPos = vec3(1.0, 1.0, 1.0);
      const vec3 ambientColor = vec3(1, 1, 1);
      const vec3 diffuseColor = vec3(0.2, 0.2, 0.2);
      const vec3 specColor = vec3(1.0, 1.0, 1.0);

      void main() {

        vec3 normal = normalize(normal);
        vec3 lightDir = normalize(lightPos - vertPos);

        float lambertian = max(dot(lightDir,normal), 0.0);
        float specular = 0.0;

        if(lambertian > 0.0) {

          vec3 viewDir = normalize(-vertPos);

          // this is blinn phong
          vec3 halfDir = normalize(lightDir + viewDir);
          float specAngle = max(dot(halfDir, normal), 0.0);
          specular = pow(specAngle, 50.0);
        }

        vec4 firstTexture = texture2D(GLSampler, textureCoord);
        // vec4 secondTexture = texture2D(GLSampler2, textureCoord);
        vec4 textureColor = firstTexture * color;

        gl_FragColor = vec4(textureColor.rgb * ambientColor +
                            lambertian * diffuseColor +
                            specular * specColor, textureColor.a);
      }
    </script>
    <script id="shader-vs-default" type="x-shader/x-vertex">
      uniform mat3 GLNormalMatrix;
      uniform mat4 GLModelViewMatrix;
      uniform mat4 GLProjectionMatrix;
      uniform mat4 GLModelViewProjectionMatrix;
      uniform mat4 GLModelViewMatrixInverse;
      uniform mat4 GLProjectionMatrixInverse;
      uniform mat4 GLModelViewProjectionMatrixInverse;
      uniform float GLPointSize;

      attribute vec3 GLPosition;
      attribute vec4 GLColor;
      attribute vec2 GLTextureCoord;
      attribute vec3 GLNormal;

      varying vec4 color;
      varying vec2 textureCoord;

      varying vec3 normal;
      varying vec3 vertPos;

      void main(){
          gl_Position = GLProjectionMatrix * GLModelViewMatrix * vec4(GLPosition, 1.0);
          gl_PointSize = GLPointSize;
          color = GLColor;
          textureCoord = GLTextureCoord;

          vec4 vertPos4 = GLModelViewMatrix * vec4(GLPosition, 1.0);
          vertPos = vec3(vertPos4) / vertPos4.w;
          normal = vec3(GLNormalMatrix * GLNormal);
      }
    </script>
    <script id="shader-fs-phong" type="x-shader/x-fragment">
      precision highp float;

      uniform mat3 GLNormalMatrix;
      uniform mat4 GLModelViewMatrix;
      uniform mat4 GLProjectionMatrix;
      uniform mat4 GLModelViewProjectionMatrix;
      uniform mat4 GLModelViewMatrixInverse;
      uniform mat4 GLProjectionMatrixInverse;
      uniform mat4 GLModelViewProjectionMatrixInverse;
      uniform float GLPointSize;
      uniform sampler2D GLSampler;
      uniform sampler2D GLSampler2;

      varying vec4 color;
      varying vec2 textureCoord;

      void main() {
        vec4 firstTexture = texture2D(GLSampler, textureCoord);
        vec4 secondTexture = texture2D(GLSampler2, textureCoord);
        vec4 textureColor = firstTexture * color;

        gl_FragColor = vec4(textureColor.rgb, textureColor.a);
      }
    </script>
    <script id="shader-vs-phong" type="x-shader/x-vertex">
      uniform mat3 GLNormalMatrix;
      uniform mat4 GLModelViewMatrix;
      uniform mat4 GLProjectionMatrix;
      uniform mat4 GLModelViewProjectionMatrix;
      uniform mat4 GLModelViewMatrixInverse;
      uniform mat4 GLProjectionMatrixInverse;
      uniform mat4 GLModelViewProjectionMatrixInverse;
      uniform float GLPointSize;

      attribute vec3 GLPosition;
      attribute vec4 GLColor;
      attribute vec2 GLTextureCoord;
      attribute vec3 GLNormal;

      varying vec4 color;
      varying vec2 textureCoord;

      varying vec3 normal;
      varying vec3 vertPos;

      const vec3 lightPos = vec3(1.0, 1.0, 1.0);
      const vec3 diffuseColor = vec3(0.5, 0.5, 0.5);
      const vec3 specColor = vec3(1.0, 1.0, 1.0);

      void main(){
        gl_Position = GLProjectionMatrix * GLModelViewMatrix * vec4(GLPosition, 1.0);
        textureCoord = GLTextureCoord;


        vec3 normal = GLNormalMatrix * GLNormal;
        vec4 vertPos4 = GLModelViewMatrix * vec4(GLPosition, 1.0);
        vec3 vertPos = vec3(vertPos4) / vertPos4.w;
        vec3 lightDir = normalize(lightPos - vertPos);
        vec3 reflectDir = reflect(-lightDir, normal);
        vec3 viewDir = normalize(-vertPos);

        float lambertian = max(dot(lightDir,normal), 0.0);
        float specular = 0.0;

        if(lambertian > 0.0) {
          float specAngle = max(dot(reflectDir, viewDir), 0.0);
          specular = pow(specAngle, 4.0);
        }
        color = vec4(lambertian*diffuseColor + specular*specColor, 1.0) * GLColor;
      }
    </script> 

  </head>
  <body>
    <canvas id="canvas" style="border: none;" tabindex="0"></canvas>

    <div class="options">
      <ul class="list camera">
        <li class="heading drop-down-toggle-camera" data-to-hide=".drop-down-camera">
          <a href="javascript:void(0);">
            CAMERA
          </a>
        </li>
        <li class="drop-down-camera">
          <span>
            translate
          </span>
          <ul class="inner">
            <li class="translate-x row">
              <span class="direction">
                x
              </span>
              <div id="slider">
              </div>
              <span class="number">
              </span>
            </li>
            <li class="translate-y row">
              <span class="direction">
                y
              </span>
              <div id="slider">
              </div>
              <span class="number">
              </span>
            </li>
            <li class="translate-z row">
              <span class="direction">
                z
              </span>
              <div id="slider">
              </div>
              <span class="number">
              </span>
            </li>
          </ul>
        </li>
        <li class="drop-down-camera">
          <span>
            rotate
          </span>
          <ul class="inner">
            <li class="rotate-x row">
              <span class="direction">
                x
              </span>
              <div id="slider">
              </div>
              <span class="number">
              </span>
            </li>
            <li class="rotate-y row">
              <span class="direction">
                y
              </span>
              <div id="slider">
              </div>
              <span class="number">
              </span>
            </li>
            <li class="rotate-z row">
              <span class="direction">
                z
              </span>
              <div id="slider">
              </div>
              <span class="number">
              </span>
            </li>
          </ul>
        </li>
        <li class="drop-down-camera">
          <span>
            scale
          </span>
          <ul class="inner">
            <li class="scale-x row">
              <span class="direction">
                x
              </span>
              <div id="slider">
              </div>
              <span class="number">
              </span>
            </li>
            <li class="scale-y row">
              <span class="direction">
                y
              </span>
              <div id="slider">
              </div>
              <span class="number">
              </span>
            </li>
            <li class="scale-z row">
              <span class="direction">
                z
              </span>
              <div id="slider">
              </div>
              <span class="number">
              </span>
            </li>
          </ul>
        </li>
      </ul>
      <ul class="list model">
        <li class="heading drop-down-toggle-model" data-to-hide=".drop-down-model">
          <a href="javascript:void(0);">
            MODEL
          </a>
        </li>
        <li class="drop-down-model">
          <span>
            translate
          </span>
          <ul class="inner">
            <li class="translate-x row">
              <span class="direction">
                x
              </span>
              <div id="slider">
              </div>
              <span class="number">
              </span>
            </li>
            <li class="translate-y row">
              <span class="direction">
                y
              </span>
              <div id="slider">
              </div>
              <span class="number">
              </span>
            </li>
            <li class="translate-z row">
              <span class="direction">
                z
              </span>
              <div id="slider">
              </div>
              <span class="number">
              </span>
            </li>
          </ul>
        </li>
        <li class="drop-down-model">
          <span>
            rotate
          </span>
          <ul class="inner">
            <li class="rotate-x row">
              <span class="direction">
                x
              </span>
              <div id="slider">
              </div>
              <span class="number">
              </span>
            </li>
            <li class="rotate-y row">
              <span class="direction">
                y
              </span>
              <div id="slider">
              </div>
              <span class="number">
              </span>
            </li>
            <li class="rotate-z row">
              <span class="direction">
                z
              </span>
              <div id="slider">
              </div>
              <span class="number">
              </span>
            </li>
          </ul>
        </li>
        <li class="drop-down-model">
          <span>
            textures
          </span>
          <ul class="inner texture-choice">
            <li class="bricks row">
              <input type="radio" name="texture" value="images/third-task/bricks.png" id="bricks">
              <label for="bricks">
                bricks
              </label>
            </li>
            <li class="fibonacci row">
              <input type="radio" name="texture" value="images/third-task/fibonacci.jpg" id="fibonacci">
              <label for="fibonacci">
                fibonacci
              </label>
            </li>
          </ul>
        </li>
      </ul>
      <ul class="list lightnings">
        <li class="heading drop-down-toggle-lightnings" data-to-hide=".drop-down-lightnings">
          <a href="javascript:void(0);">
            LIGHTNINGS
          </a>
        </li>
        <li class="drop-down-lightnings">
          <ul class="inner lightning-choice">
            <li class="blinn-phong row">
              <input type="radio" name="lightning" value="default" id="blinn-phong">
              <label for="blinn-phong">
                blinn-phong
              </label>
            </li>
            <li class="phong row">
              <input type="radio" name="lightning" value="phong" id="phong">
              <label for="phong">
                phong
              </label>
            </li>
            <li class="toon row">
              <input type="radio" name="lightning" value="toon" id="toon">
              <label for="toon">
                toon
              </label>
            </li>
          </ul>
        </li>
      </ul>
    </div>

    <script src="js/core.js"></script>
    <script src="js/lib/GL/Vector.js"></script>
    <script src="js/lib/GL/ListObject.js"></script>
    <script src="js/lib/GL/Draggable.js"></script>
    <script src="js/lib/GL/Utils.js"></script>
    <script src="js/lib/GL/MathUtils.js"></script>
    <script src="js/lib/GL/GLWrapper.js"></script>
    <script src="js/lib/GL/Vertices.js"></script>
    <script src="js/lib/GL/Vertex2.js"></script>
    <script src="js/lib/GL/Vertex.js"></script>
    <script src="js/lib/GL/Vertex4.js"></script>
    <script src="js/lib/GL/Buffers.js"></script>
    <script src="js/lib/GL/Axis.js"></script>
    <script src="js/lib/GL/ScaleState.js"></script>
    <script src="js/lib/GL/RotationState.js"></script>
    <script src="js/lib/GL/TranslationState.js"></script>
    <script src="js/lib/GL/Camera.js"></script>
    <script src="js/lib/GL/Indexer.js"></script>
    <script src="js/lib/GL/Buffer.js"></script>
    <script src="js/lib/GL/Matrices.js"></script>
    <script src="js/lib/GL/Object.js"></script>
    <script src="js/lib/GL/ObjectTextures.js"></script>
    <script src="js/lib/GL/Shape.js"></script>
    <script src="js/lib/GL/Color.js"></script>
    <script src="js/lib/GL/Objects.js"></script>
    <script src="js/lib/GL/Shaders.js"></script>
    <script src="js/lib/GL/Textures.js"></script>
    <script src="js/lib/GL/Texture.js"></script>
    <script src="js/lib/GL/Uniforms.js"></script>
    <script src="js/lib/GL/Uniform.js"></script>

    <script src="js/lib/GL/StateObject.js"></script>

    <script src="js/third-task/ThirdTaskObject.js"></script>
    <script src="js/third-task/FirstObject.js"></script>
    <script src="js/third-task/SecondObject.js"></script>
    <script src="js/third-task/ThirdObject.js"></script>
    <script src="js/third-task/ForthObject.js"></script>
    <script src="js/third-task/FifthObject.js"></script>
    <script src="js/third-task/SixthObject.js"></script>
    <script src="js/third-task/SeventhObject.js"></script>
    <script src="js/third-task/CubeObject.js"></script>
    <script src="js/Run.js"></script>
    <script src="js/third-task/RunThirdTask.js"></script>
    <script src="js/main.js"></script>
  </body>
</html>